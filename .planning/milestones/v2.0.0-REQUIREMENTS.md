# Requirements Archive: v2.0.0 Network, Codecs & De-identification

**Archived:** 2026-01-30
**Status:** ✅ SHIPPED

This is the archived requirements specification for v2.0.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## Version: 2.0.0

### Functional Requirements

#### FR-10: DICOM Networking (Part 8)
| ID | Requirement | Priority | Status |
|----|-------------|----------|--------|
| FR-10.1 | PDU parsing and building (A-ASSOCIATE, P-DATA, A-RELEASE, A-ABORT) | Must | ✅ Complete |
| FR-10.2 | Association negotiation with presentation contexts | Must | ✅ Complete |
| FR-10.3 | C-ECHO SCU (verify connectivity) | Must | ✅ Complete |
| FR-10.4 | C-ECHO SCP (respond to verification) | Must | ✅ Complete |
| FR-10.5 | C-STORE SCU (send DICOM files) | Must | ✅ Complete |
| FR-10.6 | C-STORE SCP with streaming support | Must | ✅ Complete |
| FR-10.7 | C-FIND SCU (query remote PACS) | Must | ✅ Complete |
| FR-10.8 | C-MOVE SCU (retrieve from PACS) | Must | ✅ Complete |
| FR-10.9 | C-GET SCU (retrieve via C-STORE sub-ops) | Must | ✅ Complete |
| FR-10.10 | DicomClient class with async API | Must | ✅ Complete |
| FR-10.11 | DicomServer class with event-based handlers | Must | ✅ Complete |
| FR-10.12 | Zero-copy PDU parsing via System.IO.Pipelines | Should | ⏳ Deferred to v3 |

#### FR-11: Image Codecs (Pure C#)
| ID | Requirement | Priority | Status |
|----|-------------|----------|--------|
| FR-11.1 | JPEG Baseline codec (8-bit lossy, Process 1) | Must | ✅ Complete |
| FR-11.2 | JPEG Lossless codec (Process 14, Selection Value 1) | Must | ✅ Complete |
| FR-11.3 | JPEG 2000 Lossless codec | Must | ✅ Complete |
| FR-11.4 | JPEG 2000 Lossy codec | Should | ✅ Complete |
| FR-11.5 | Pure C# implementations (no native dependencies) | Must | ✅ Complete |
| FR-11.6 | Trim/AOT compatible | Must | ✅ Complete |
| FR-11.7 | Register via existing IPixelDataCodec interface | Must | ✅ Complete |

#### FR-12: Native Codecs Package (Optional)
| ID | Requirement | Priority | Status |
|----|-------------|----------|--------|
| FR-12.1 | SharpDicom.Codecs NuGet package | Should | ✅ Complete |
| FR-12.2 | Native JPEG codec (libjpeg-turbo) | Should | ✅ Complete |
| FR-12.3 | Native JPEG 2000 codec (OpenJPEG) | Should | ✅ Complete |
| FR-12.4 | Override registration for pure C# codecs | Should | ✅ Complete |
| FR-12.5 | Cross-platform natives (win-x64, linux-x64, osx-arm64) | Should | ✅ Complete |

#### FR-13: De-identification
| ID | Requirement | Priority | Status |
|----|-------------|----------|--------|
| FR-13.1 | PS3.15 Basic Application Level Confidentiality Profile | Must | ✅ Complete |
| FR-13.2 | Source-generated action table from NEMA part15.xml | Must | ✅ Complete |
| FR-13.3 | UID remapping with consistent study-level replacement | Must | ✅ Complete |
| FR-13.4 | Date shifting with configurable offset | Must | ✅ Complete |
| FR-13.5 | Integration with existing element callback system | Must | ✅ Complete |
| FR-13.6 | DicomDeidentifier class with fluent configuration | Should | ✅ Complete |

---

### Non-Functional Requirements

#### NFR-04: Networking Performance
| ID | Requirement | Target | Status |
|----|-------------|--------|--------|
| NFR-04.1 | Zero-copy PDU parsing where possible | Design | ⏳ Partial (ref structs, not Pipelines) |
| NFR-04.2 | Streaming C-STORE without full file buffering | Design | ✅ Complete |
| NFR-04.3 | Configurable PDU size (16KB-1MB) | Design | ✅ Complete |

#### NFR-05: Codec Performance
| ID | Requirement | Target | Status |
|----|-------------|--------|--------|
| NFR-05.1 | Pure C# codecs: acceptable for typical use | Design | ✅ Complete |
| NFR-05.2 | Native codecs: 10-50× faster than pure C# | Benchmark | ✅ Complete (2-6× typical, up to 50× for large images) |
| NFR-05.3 | No memory leaks in codec operations | Design | ✅ Complete |

### Out of Scope (v3+)

| Feature | Reason | Status |
|---------|--------|--------|
| TLS support | Orthogonal to core networking | Still out of scope |
| Modality Worklist (MWL) | Niche RIS integration | Still out of scope |
| DIMSE-N services | Normalized objects are <5% of use cases | Still out of scope |
| C-FIND SCP / C-MOVE SCP | Most users are SCU; SCP is complex | Still out of scope |
| JPEG-LS codec | Less common than JPEG/J2K | Partial (native only via CharLS) |
| HTJ2K codec | Emerging standard | Still out of scope |
| Burned-in PHI detection | Requires OCR | Partial (risk detection only) |
| Multiple de-id profiles | Basic profile covers 90% | ✅ Implemented (4 presets) |

### Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| FR-10.1 | Phase 10 | ✅ Complete |
| FR-10.2 | Phase 10 | ✅ Complete |
| FR-10.3 | Phase 10 | ✅ Complete |
| FR-10.4 | Phase 10 | ✅ Complete |
| FR-10.5 | Phase 11 | ✅ Complete |
| FR-10.6 | Phase 11 | ✅ Complete |
| FR-10.7 | Phase 11 | ✅ Complete |
| FR-10.8 | Phase 11 | ✅ Complete |
| FR-10.9 | Phase 11 | ✅ Complete |
| FR-10.10 | Phase 10 | ✅ Complete |
| FR-10.11 | Phase 10 | ✅ Complete |
| FR-10.12 | Phase 11 | ⏳ Deferred |
| FR-11.1 | Phase 12 | ✅ Complete |
| FR-11.2 | Phase 12 | ✅ Complete |
| FR-11.3 | Phase 12 | ✅ Complete |
| FR-11.4 | Phase 12 | ✅ Complete |
| FR-11.5 | Phase 12 | ✅ Complete |
| FR-11.6 | Phase 12 | ✅ Complete |
| FR-11.7 | Phase 12 | ✅ Complete |
| FR-12.1 | Phase 13 | ✅ Complete |
| FR-12.2 | Phase 13 | ✅ Complete |
| FR-12.3 | Phase 13 | ✅ Complete |
| FR-12.4 | Phase 13 | ✅ Complete |
| FR-12.5 | Phase 13 | ✅ Complete |
| FR-13.1 | Phase 14 | ✅ Complete |
| FR-13.2 | Phase 14 | ✅ Complete |
| FR-13.3 | Phase 14 | ✅ Complete |
| FR-13.4 | Phase 14 | ✅ Complete |
| FR-13.5 | Phase 14 | ✅ Complete |
| FR-13.6 | Phase 14 | ✅ Complete |

---

## Milestone Summary

**Shipped:** 29 of 30 v2 requirements (FR-10.12 deferred)
**Adjusted:**
- NFR-05.2: Native codec performance target adjusted from "10-50×" to "2-6× typical" based on benchmarks
- "Multiple de-id profiles" moved from Out of Scope to Implemented (4 presets delivered)

**Dropped:** None

---
*Archived: 2026-01-30 as part of v2.0.0 milestone completion*
